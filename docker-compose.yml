services:
  antigravity-manager:
    build:
      context: /home/ayang/code/Antigravity-Manager
      dockerfile: /home/ayang/code/Antigravity-Manager/Dockerfile
    image: agm-image
    container_name: antigravity-manager
    restart: unless-stopped
    network_mode: host  # 使用 host 网络模式，绕过 Docker NAT，解决 EPIPE 问题
    # 注意：host 模式下不需要 ports 映射，服务直接监听宿主机端口
    # Web UI: http://localhost:8765
    # 反代服务: http://localhost:8045
    volumes:
      # 持久化数据 (账号、配置等)
      - ./data:/data
    environment:
      - RUST_LOG=info
